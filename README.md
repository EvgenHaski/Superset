# Superset Dashboard: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–µ–∫—Ç Superset —Å –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

---

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ

- DAU, MAU, WAU ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ, –º–µ—Å—è—á–Ω—ã–µ –∏ –Ω–µ–¥–µ–ª—å–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏  
- Likes –∏ Views (–ø–ª–∞–≤–∞—é—â–∏–π –º–µ—Å—è—Ü)  
- CTR (–ø–ª–∞–≤–∞—é—â–∏–π –º–µ—Å—è—Ü)  
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–π  
- –¢–æ–ø-100 –ø–æ—Å—Ç–æ–≤ –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏  
- –°—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- –¢–æ–ø-100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –Ω–µ–¥–µ–ª—è–º –≤ —Ä–∞–∑–±–∏–≤–∫–µ –Ω–∞ –Ω–æ–≤—ã—Ö, –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∏ –≤—ã–±—ã–≤—à–∏—Ö
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –Ω–µ–¥–µ–ª—è–º  
- Retention ‚Äî —É–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –¥—Ä—É–≥–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Å—Ç—Ä–æ—è—Ç—Å—è –Ω–∞ –±–∞–∑–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤.

---

## üì∏ –ì—Ä–∞—Ñ–∏–∫–∏

![DAU MAU WAU](images/1.jpg)

![Likes and Views](images/2.jpg)

![CTR](images/3.jpg)

![Retention](images/4.jpg)

## üîç –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã —Å–ª–æ–∂–Ω—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –¥–∞—à–±–æ—Ä–¥–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.

### 1. –ü–æ–¥—Å—á–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –¥–∞—Ç–µ –∏ –¥–∞—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è

```sql
SELECT toString(date) as date, toString(start_date) as start_date, count(user_id) as active_users
FROM
(
  SELECT user_id, min(toDate(time)) as start_date 
  FROM simulator_20250420.feed_actions 
  GROUP BY user_id
  HAVING start_date >= today()-20
) t1
JOIN
(
  SELECT user_id, toDate(time) as date
  FROM simulator_20250420.feed_actions
) t2
USING user_id
GROUP BY date, start_date
```
### 2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –∏ —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª–∞

```sql
SELECT t2.user_id as user_id, t2.post_id, t2.action, t2.time, t2.age, t2.country, t2.city, t2.os, t2.source, t2.exp_group, t1.start_date as start_date,
if(start_date = toDate(time), 'new', 'old') as new,
if(t2.gender = 1, 'male', 'female') as gender
FROM
(SELECT user_id, min(toDate(time)) as start_date 
FROM simulator_20250420.feed_actions 
GROUP BY user_id) t1
JOIN
(SELECT * FROM simulator_20250420.feed_actions) t2
ON t1.user_id = t2.user_id
```
### 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ "–Ω–æ–≤—ã–π", "—É–¥–µ—Ä–∂–∞–Ω–Ω—ã–π" –∏ "–≤—ã–±—ã–≤—à–∏–π" –ø–æ –Ω–µ–¥–µ–ª—è–º

```sql
SELECT 
    this_week, 
    previous_week, 
    -uniq(user_id) AS num_users, 
    status 
FROM (
    SELECT 
        user_id,
        groupUniqArray(toMonday(toDate(time))) AS weeks_visited,
        addWeeks(arrayJoin(weeks_visited), +1) AS this_week,
        IF(has(weeks_visited, this_week) = 1, 'retained', 'gone') AS status,
        addWeeks(this_week, -1) AS previous_week
    FROM simulator_20250420.feed_actions
    GROUP BY user_id
)
WHERE status = 'gone'
GROUP BY this_week, previous_week, status
HAVING this_week != addWeeks(toMonday(today()), +1)

UNION ALL

SELECT 
    this_week, 
    previous_week, 
    toInt64(uniq(user_id)) AS num_users, 
    status 
FROM (
    SELECT 
        user_id,
        groupUniqArray(toMonday(toDate(time))) AS weeks_visited,
        arrayJoin(weeks_visited) AS this_week,
        IF(has(weeks_visited, addWeeks(this_week, -1)) = 1, 'retained', 'new') AS status,
        addWeeks(this_week, -1) AS previous_week
    FROM simulator_20250420.feed_actions
    GROUP BY user_id
)
GROUP BY this_week, previous_week, status
```
