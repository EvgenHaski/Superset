# Superset Dashboard: Аналитика пользовательской активности

Этот репозиторий содержит проект Superset с построенными графиками для анализа пользовательской активности и взаимодействия с приложением.

---

## 📊 Основные метрики и графики на дашборде

- DAU, MAU, WAU — ежедневные, месячные и недельные активные пользователи  
- Likes и Views (плавающий месяц)  
- CTR (плавающий месяц)  
- Количество публикаций  
- Топ-100 постов по активности  
- Средняя активность на пользователя  
- Топ-100 пользователей  
- Количество пользователей по неделям в разбивке на новых, оставшихся и выбывших
- Общее количество пользователей по неделям  
- Retention — удержание пользователей  

Для удобства использования на дашборде настроены фильтры по времени и другим параметрам. Некоторые графики строятся на базе кастомных SQL-запросов.

---

## 📸 Графики

![DAU MAU WAU](images/1.jpg)

![Likes and Views](images/2.jpg)

![CTR](images/3.jpg)

![Retention](images/4.jpg)

## 🔍 Примеры используемых SQL-запросов

Ниже приведены примеры сложных SQL-запросов, которые используются в дашборде для получения ключевых метрик и построения графиков.

### 1. Подсчет активных пользователей по дате и дате первого действия

```sql
SELECT toString(date) as date, toString(start_date) as start_date, count(user_id) as active_users
FROM
(
  SELECT user_id, min(toDate(time)) as start_date 
  FROM simulator_20250420.feed_actions 
  GROUP BY user_id
  HAVING start_date >= today()-20
) t1
JOIN
(
  SELECT user_id, toDate(time) as date
  FROM simulator_20250420.feed_actions
) t2
USING user_id
GROUP BY date, start_date
