# Superset Dashboard: Аналитика пользовательской активности

Этот репозиторий содержит проект Superset с построенными графиками для анализа пользовательской активности и взаимодействия с приложением.

---

## 📊 Основные метрики и графики на дашборде

- DAU, MAU, WAU — ежедневные, месячные и недельные активные пользователи  
- Likes и Views (плавающий месяц)  
- CTR (плавающий месяц)  
- Количество публикаций  
- Топ-100 постов по активности  
- Средняя активность на пользователя  
- Топ-100 пользователей  
- Количество пользователей по неделям в разбивке на новых, оставшихся и выбывших
- Общее количество пользователей по неделям  
- Retention — удержание пользователей  

Для удобства использования на дашборде настроены фильтры по времени и другим параметрам. Некоторые графики строятся на базе кастомных SQL-запросов.

---

---

## 🖼️ Скриншоты

| | |
|:-:|:-:|
| ![DAU‑MAU‑WAU](images/1.png) | ![Likes & Views (Rolling)](images/2.png) |
| ![Retention Cohorts](images/3.png) | ![Top‑100 Posts](images/4.png) |

> **Как заменить изображения:**  
> 1. Положите PNG/JPG файлы в папку `images/`.  
> 2. Дайте им те же имена, что в таблице выше, или обновите пути в README.

---

## 🔍 Примеры используемых SQL-запросов

Ниже приведены примеры сложных SQL-запросов, которые используются в дашборде для получения ключевых метрик и построения графиков.

### 1. Подсчет активных пользователей по дате и дате первого действия

```sql
SELECT toString(date) as date, toString(start_date) as start_date, count(user_id) as active_users
FROM
(
  SELECT user_id, min(toDate(time)) as start_date 
  FROM simulator_20250420.feed_actions 
  GROUP BY user_id
  HAVING start_date >= today()-20
) t1
JOIN
(
  SELECT user_id, toDate(time) as date
  FROM simulator_20250420.feed_actions
) t2
USING user_id
GROUP BY date, start_date
